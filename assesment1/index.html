<!DOCTYPE html>
<html>
<head>
    <title>Stock Price Chart</title>
    
    <script src="stock-tracker.js" type="text/javascript"></script>
    <script type="text/javascript">
     let chartData =[];
        getRequest(
            'https://financialmodelingprep.com/api/v3/historical-chart/1hour/AAPL?apikey=demo',
             drawOutput
                 );
           
       
                           function drawOutput(responseText) {

                            chartData = JSON.parse(responseText).slice(0,9);
                           

                            let graphdata = chartData.map((r)=>{
                                return {
                                    x: new Date(r.date).toTimeString().slice(0,8),
                                    y: Math.round(r.close)
                                }
                            })

                            var dataDef = { title: "Apple Stock price Chart",
                            xLabel: 'Every Hour', 
                            yLabel: 'Price',
                            labelFont: '19pt Arial', 
                            dataPointFont: '10pt Arial',
                            renderTypes: [LineChart.renderType.lines, LineChart.renderType.points],
                            dataPoints: graphdata
                           };
                           
                           LineChart.render('canvas', dataDef)

                            }   

    </script>
</head>
<body style="margin-left:50px;margin-top:50px;">
    <canvas id="canvas" width="800" height="600"></canvas>
</body>
</html>