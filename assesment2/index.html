<!DOCTYPE html>
<html>
<head>
    <title>Stock Price Chart</title>
    <link rel="stylesheet" href="site.css" >
    <script src="stock-tracker.js" type="text/javascript"></script>
    <script type="text/javascript">
     let chartData =[];
        getRequest(
            'https://financialmodelingprep.com/api/v3/historical-chart/1hour/AAPL?apikey=demo',
             drawOutput
                 );
           
       
                           function drawOutput(responseText) {

                            chartData = JSON.parse(responseText);
                           
                            let graphdata = chartData.map((r)=>{
                                return {
                                    x: new Date(r.date).toDateString().slice(0,15) + ' '+ new Date(r.date).toTimeString().slice(0,8),
                                    y: Math.round(r.close),
                                    open: r.open,
                                    low: r.low,
                                    high: r.high
                                }
                            })

                            chart.createChart('.chart',graphdata)
                            }   

                            

    </script>
</head>
<body>
    <h1>Apple Stock Price</h1>
    <div class="chart" id="chart"></div>

    <div class="tooltipMeasure hide" id='tooltipMeasure'>
        <span id="measure"></span>
    </div>
</body>
</html>